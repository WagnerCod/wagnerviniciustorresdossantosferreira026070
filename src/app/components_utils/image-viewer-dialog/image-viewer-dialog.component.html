<div class="flex flex-col max-h-[90vh]">
    <!-- Header -->
    <div class="flex justify-between items-start px-6 pt-4 pb-2 border-b border-gray-200">
        <div class="flex-1">
            <h2 mat-dialog-title class="text-xl font-medium text-gray-900 m-0" *ngIf="data.title">
                {{ data.title }}
            </h2>
            <p class="mt-1 text-sm text-gray-600 m-0" *ngIf="data.subtitle">
                {{ data.subtitle }}
            </p>
        </div>
        <button mat-icon-button class="-mt-2 -mr-2 ml-2" (click)="close()">
            <mat-icon>close</mat-icon>
        </button>
    </div>

    <!-- Content -->
    <mat-dialog-content class="p-0 overflow-hidden flex items-center justify-center min-h-[300px]">
        <div class="relative w-full h-full flex items-center justify-center bg-gray-100 min-h-[300px]">
            <!-- Loader enquanto a imagem carrega -->
            <div 
                class="flex flex-col items-center justify-center p-12 text-gray-600" 
                *ngIf="!imageLoaded"
            >
                <mat-icon class="text-5xl w-12 h-12 mb-4 text-gray-400 animate-spin">
                    refresh
                </mat-icon>
                <p class="m-0 text-sm">Carregando imagem...</p>
            </div>

            <!-- Imagem -->
            <img 
                *ngIf="!imageError"
                [src]="data.imageUrl" 
                [alt]="data.title || 'Imagem'"
                (load)="onImageLoad()"
                (error)="onImageError()"
                class="max-w-full max-h-[70vh] object-contain transition-opacity duration-300"
                [class.opacity-0]="!imageLoaded"
                [class.opacity-100]="imageLoaded"
            />

            <!-- Mensagem de erro -->
            <div 
                class="flex flex-col items-center justify-center p-12 text-gray-600" 
                *ngIf="imageError"
            >
                <mat-icon class="text-5xl w-12 h-12 mb-4 text-red-500">
                    broken_image
                </mat-icon>
                <p class="m-0 text-sm">Não foi possível carregar a imagem</p>
            </div>
        </div>
    </mat-dialog-content>

    <!-- Actions -->
    <mat-dialog-actions class="px-6 py-4 border-t border-gray-200 justify-end">
        <button mat-raised-button color="primary" (click)="close()">
            Fechar
        </button>
    </mat-dialog-actions>
</div>
